# Codex config.toml — 精简 & 注释校准版 V1.1
# 适用于 Codex CLI（Responses API）
################################################################################

################################################################################
# 核心模型与搜索
################################################################################

# 主模型（默认：gpt-5.2-codex）
model = "gpt-5.2-codex"

# /review 使用的模型（未设置则继承 model）
review_model = "gpt-5.2-codex"

# 模型提供方（openai | azure | ollama | oss）
model_provider = "openai"

# Web 搜索模式：
# - cached   使用 OpenAI 维护的搜索缓存（默认，安全）
# - live     实时抓取网页（等同于 CLI --search）
# - disabled 完全禁用搜索
web_search = "cached"

################################################################################
# 推理与输出控制（Responses API）
################################################################################

# 推理强度：minimal | low | medium | high | xhigh
model_reasoning_effort = "xhigh"

# 推理摘要显示策略：auto | concise | detailed | none
model_reasoning_summary = "auto"

# 文本输出详细度：low | medium | high
model_verbosity = "medium"

################################################################################
# 审批与沙箱（安全边界）
################################################################################

# 命令审批策略：
# - on-request（默认，推荐）
# - untrusted
# - on-failure
# - never（危险）
approval_policy = "on-request"

# 工具沙箱模式：
# - read-only（默认，最安全）
# - workspace-write
# - danger-full-access（极其危险）
sandbox_mode = "read-only"

################################################################################
# 登录与认证
################################################################################

# CLI 登录凭据存储方式：file | keyring | auto
cli_auth_credentials_store = "file"

# ChatGPT 登录 API 基础地址（注意：无尾部空格）
chatgpt_base_url = "https://chatgpt.com/backend-api/"

################################################################################
# 项目文档（AGENTS.md）
################################################################################

# AGENTS.md 最大嵌入字节数
project_doc_max_bytes = 32768

################################################################################
# UI 与交互
################################################################################

# 文件引用打开方式：vscode | cursor | windsurf | none
file_opener = "vscode"

# 是否隐藏模型推理事件
hide_agent_reasoning = false

################################################################################
# 功能开关（集中式，推荐）
################################################################################

[features]
shell_tool = true
shell_snapshot = true
exec_policy = true
remote_compaction = true
powershell_utf8 = true

################################################################################
# MCP Servers（按需启用）
################################################################################

[mcp_servers]

[mcp_servers.context7]
type = "stdio"
command = "npx"
args = ["-y", "@upstash/context7-mcp"]

[mcp_servers.microsoft-docs]
type = "stdio"
command = "mcp-proxy"
args = ["--transport", "streamablehttp", "https://learn.microsoft.com/api/mcp"]

################################################################################
# 历史记录
################################################################################

[history]
persistence = "save-all"

################################################################################
# TUI
################################################################################

[tui]
notifications = false
animations = true
show_tooltips = true
